<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tp.admin.dao.AdminTerPropertyDao">
	<select id="findAllTerProperty" parameterType="com.tp.admin.data.search.TerPropertySearch" resultMap="AdminTerPropertyDTOMap">
		SELECT * FROM admin_ter_property
		WHERE deleted = 0
		<if test="pageSize != null and pageSize !=0 and offset != null">
			LIMIT #{offset},#{pageSize}
		</if>
	</select>

	<select id="findAllTerPropertyCount" resultType="java.lang.Integer">
		SELECT COUNT(atp.id) FROM admin_ter_property AS atp
	</select>

	<select id="findTerStartInfo" parameterType="java.lang.Integer" resultMap="AdminTerPropertyDTOMap">
		SELECT  atp.id,
				atp.ter_id,
				atp.net_method,
				atp.video_control,
				atp.bubble_limit,
				atp.ter_clientversion,
				atp.ter_busi_mode,
				atp.ter_model,
				atp.ter_remark,
				atp.high_limit,
				atp.wide_limit,
				atp.ad_exist,
				atp.screen_wide,
				atp.screen_high,
				atp.property_remark,
				atp.device_type,
				atp.cdr_picture,
				atp.deleted,
				atp.frp_ip,
				atp.frp_port
        FROM admin_ter_property AS atp
				WHERE atp.id=#{id}
	</select>


	<update id="updateTerProperty" parameterType="com.tp.admin.data.dto.AdminTerPropertyDTO">
		UPDATE `admin_ter_property`
		<trim prefix="set" suffixOverrides=",">
			<if test="terId != null">
				`ter_id` = #{terId},
			</if>
			<if test="netMethod != null">
				`net_method` = #{netMethod},
			</if>
			<if test="videoControl != null">
				`video_control` = #{videoControl},
			</if>
			<if test="bubbleLimit != null">
				`bubble_limit` = #{bubbleLimit},
			</if>
			<if test="terClientVersion  != null">
				`ter_clientversion` = #{terClientVersion},
			</if>
			<if test="terBusiMode  != null">
				`ter_busi_mode` = #{terBusiMode},
			</if>
			<if test="terModel != null">
				`ter_model` = #{terModel},
			</if>
			<if test="terRemark != null">
				`ter_remark` = #{terRemark},
			</if>
			<if test="highLimit != null">
				`high_limit` = #{highLimit},
			</if>
			<if test="wideLimit != null">
				`wide_limit` = #{wideLimit},
			</if>
			<if test="adExist != null">
				`ad_exist` = #{adExist},
			</if>
			<if test="screenWide != null">
				`screen_wide` = #{screenWide},
			</if>
			<if test="screenHigh != null">
				`screen_high` = #{screenHigh},
			</if>
			<if test="propertyRemark != null">
				`property_remark` = #{propertyRemark},
			</if>
			<if test="cdrPicture != null">
				`cdr_picture` = #{cdrPicture},
			</if>
			<if test="frpIp != null">
				`frp_ip` = #{frpIp},
			</if>
			<if test="frpPort != null">
				`frp_port` = #{frpPort}
			</if>
		</trim>
		WHERE
			id=#{id}
	</update>
	
	<insert id="insertTerProperty" parameterType="com.tp.admin.data.dto.AdminTerPropertyDTO">
		INSERT INTO
			admin_ter_property(
			ter_id,
			ter_model,
			ter_remark,
			video_control,
			bubble_limit,
			high_limit,
			wide_limit,
			property_remark,
			device_type
			)
			VALUES
			(
			#{terId},
			#{terModel},
			#{terRemark},
			#{videoControl},
			#{bubbleLimit},
			#{highLimit},
			#{wideLimit},
			#{propertyRemark},
			#{deviceType}
			)
	</insert>

	<resultMap id="AdminTerPropertyDTOMap" type="com.tp.admin.data.dto.AdminTerPropertyDTO">
		<id column="ter_id" property="terId" javaType="INTEGER"/>
		<result column="net_method" property="netMethod" jdbcType="INTEGER"/>
		<result column="video_control" property="videoControl" jdbcType="VARCHAR"/>
		<result column="bubble_limit" property="bubbleLimit" jdbcType="INTEGER"/>
		<result column="ter_clientversion" property="terClientVersion" jdbcType="VARCHAR"/>
		<result column="ter_busi_mode" property="terBusiMode" jdbcType="INTEGER"/>
		<result column="ter_model" property="terModel" jdbcType="VARCHAR"/>
		<result column="ter_remark" property="terRemark" jdbcType="VARCHAR"/>
		<result column="property_remark" property="propertyRemark" jdbcType="VARCHAR"/>
		<result column="high_limit" property="highLimit" jdbcType="SMALLINT"/>
		<result column="wide_limit" property="wideLimit" jdbcType="SMALLINT"/>
		<result column="ad_exist" property="adExist" jdbcType="BIT"/>
		<result column="deleted" property="deleted" jdbcType="BIT"/>
		<result column="screen_wide" property="screenWide" jdbcType="INTEGER"/>
		<result column="screen_high" property="screenHigh" jdbcType="INTEGER"/>
		<result column="device_type" property="deviceType" jdbcType="INTEGER"/>
		<result column="cdr_picture" property="cdrPicture" jdbcType="VARCHAR"/>
		<result column="frp_ip" property="frpIp" jdbcType="VARCHAR"/>
		<result column="frp_port" property="frpPort" jdbcType="VARCHAR"/>
	</resultMap>

</mapper>